language: java
jdk:
- oraclejdk8
install: mvn --version
before_script: "./.travis.version_if_tag.sh"
after_success: "./.travis.deploy_if_tag.sh"
cache:
  directories:
  - "$HOME/.m2"
env:
  global:
  - secure: RReoTE5Y7ngxk+mM+iy/fpDPvv5SZ/y4xOkrFI4DDnKPCQrSxLMdFdpTwy8slgIxH1y0hA8jLwcpdP0WJfkGX3iH+YblTvEtKrgQxyk2aAcBvrw1YLcc9cFjmrqrq8j4san1h+c52P8JAicPjupxtI5gGmOmrIJbIWi2hmJPVnMq8o88vciwPvZ018W0mEQsEvQyA3bFF4CJuIam6LpXOtSKNsgOgas9taCtn6DBUbbLdrFqt3MDJZkB+zHKpiyfyVUbqwHWc/Nj3KfogHHSzuoG6MAfWFVoU28xb01tn0VWKHxKul6Pub932bPh+4Xaccn0DYUx4DDG10En6QhWDMGZuz0Ovw2zD1fUCXt2XtK5OLZ4QGJDqIAr8w/uzEW7J/82GWkPWSoIHMwqH7LkyX390juQOBix67tZOxgWyvMozn3cdPeP/1fIe66SFm8CB+3PKT5K63yo7WjbselEz9sUg9Hg800U2AbTMbBN6cNdtVeJtEOBYVzhQq3KYZc+UPgQyUZgjtHNMhSZanzyroca2S3eznvJk+OqcZzZ6TQvMVhKJIGvmMGgn8XOKtC7oZAtTlCj4GI34dNUYOKmQNUlUQkR9Mc7nElIM5jFt/RTB5EHJbrZGaReJJzZ3xEtYR5+aWXBA88jzqQJiFULmsllMwFgde6+0IOljkGHENo=
  - secure: IPEYu2ZMaYBi6wQgOmX8xmfngCAl+A7KXMOM/OfJGzgH1R/OYtx87esJ8Z4cIh6IjHD0C0h76zYWr4wC0sU/xBvrRvjF1qaT2mYZfcZgGXRWjJ+2H0C0Um2F8QGB6KtYeIQ78VCw6jBEvxXFg2qBfdzEaMJlhhsT0pnxsvZSwwfhkapLWdKenur0lyCZcND1CggLXj/kLYLCdJVmLtcyNLlIC5qXgehzSMstLZFv8F1akEEo5kue8IJyyIZbGgU43SRIIQU6MF+p6nYQNWVbcrf6XV3nezWr6DfFXtMjwpTTINnLlQ4TZA1romnaAEUJyrsAFFJjBHdICf48Xp0anlSAdvqGy4/T5+yCINHtWmZIpxf6m+gOqMMi7JXQx01TDG9enxaXufrZhxT1FU60Mj9ZsrYwocbWvu1N6K7dbbOeMthAgWTAwSu66QYZyF4XQKY+Bc16BEkYgEizPufhn0I5wBR6Hb/WxWxGb0D1/Z+N3/db2Jq3VDtXC9+3eq7HmLIBNW7XoCOddm+zhqv9JswNR59syGKtENbxvhl70sCS1eRoflWhlaLAEdemXsu0g5mjkDrs5ywnXYzmZxhyvmHrHN+6KCHuxtWc11dlTQoffMMZa1fvkavRrbTG4mSIp4f0E+4pC5gadv6yjkPamOczfvsICp7DgF5L5vqkzlg=
deploy:
  provider: releases
  api_key:
    secure: '038nHViZ/EMfo7qc2zKeA5+WTF3H4v6rLy7wbZCf1ffZxakgbuDxRs0FICTngkBL/ot0c1N77HoqpamZ24NnKUH2t6OwZC4ZTmqdNkz3lbVUAi7C9qAiakcOD4BCAZDOxGs8FrZhB833G/iGL30Yd9zkMlzCniMBqnFh1DAiSLh+p6FcLUGU8h7NHJjDihzQkLD2MPJ+RghWVKeUlUU67F3v4vjDJnc/JNPrt+s3IzF4YCus7elJIX2dXzPZfqCENaRCScgA1vT/KUGI7FrUS6UZxuzJ0JG6VcyF0Mc/RVsFeDgLgpA4f9hbjheh9kh5hiiEB0RUWZ5u9zsWGb9TF/5gJDaFijXWv3rqnVKqQwjaJGUDNFYYwxAUookYyfT9OeYjNRpZ1gRPvprAl0wii2pTdrFXa+xpSjEmhjgjK3cOZWwUn0Kpqo9824O4QJSVYMRHpLncND4/WJ/gvAjUXO7mRm97vpt5klmGxlpF4hRnhZfxwXYVa1C/rIuz6sCNief/cidTf2ThKt2ZlE3pTHFCd0+bBDYp4POXHVeYNMN/uiORkUrQZwUslUNRQfZijRw9citaudjOIK3TxDloNrGBQgkuGgpdP/13t8+P77NdRFT/XQW/bFYkJMfvx7XwNuQQRuAXAlRtFW4Oq+EBSgujoEbRbD4VWvbA07gRw0Q='
  file: 
    - target/preston.jar
    - target/preston.deb
    - target/preston.image.tar
  skip_cleanup: true
  on:
    repo: bio-guoda/preston
    tags: true
